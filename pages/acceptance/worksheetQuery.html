<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>工作单查询</title>
    <link rel="stylesheet" type="text/css" href="../../layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="../css/page.css">
</head>
<body>
<!-- 外部整体 -->
<div class="external">
    <!-- 标题 -->
    <p class="ptitle">工作单查询</p>
    <!-- 操作区域 -->
    <div class="operation">
        <!-- 向上间距 -->
        <div style="height: 10px;"></div>
        <form class="layui-form" action="">
            <div class="layui-form-item">

                <div class="layui-inline">
                    <label class="layui-form-label">工作单号:</label>
                    <div class="layui-input-block" style="width: 150px;">
                        <input type="text" name="title" placeholder="请输入工作单号" autocomplete="off" class="layui-input">
                    </div>
                </div>

                <div class="layui-inline">
                    <label class="layui-form-label">开单时间:</label>
                    <div class="layui-input-block" style="width: 150px;">
                        <input type="text" name="title" placeholder="请输入开单时间" autocomplete="off" class="layui-input">
                    </div>
                </div>

                <!-- 查询按钮组 -->
                <div class="layui-inline">
                    <button type="button" class="layui-btn btnQuery">
                        <i class="layui-icon">&#xe615;</i> 查询
                    </button>

                    <button type="button" class="layui-btn btnOther">
                        <i class="layui-icon">&#x1002;</i> 重置
                    </button>

                    <button id="btnMore" type="button" class="layui-btn btnOther">
                        <i class="layui-icon">&#xe671;</i>更多
                    </button>
                </div>

            </div>

            <!-- 隐藏其它查询条件 -->
            <div id="hQuery" class="layui-form-item" style="display: none;">
                <div class="layui-form-item">

                    <div class="layui-inline">
                        <label class="layui-form-label">委托单位:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入委托单位" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">件数:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入件数" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">收货单位:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入收货单位" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">数据状态:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <select name="city" lay-verify="required">
                                <option value=""></option>
                                <option value="0">全部</option>
                                <option value="1">未开单</option>
                                <option value="2">配载信息不全</option>
                                <option value="3">其他信息不全</option>
                                <option value="4">信息完整</option>
                            </select>
                        </div>
                    </div>

                </div>

                <div class="layui-form-item">

                    <div class="layui-inline">
                        <label class="layui-form-label">受理单位:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <input type="text" name="title" placeholder="请输入受理单位" autocomplete="off" class="layui-input">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">含下级:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <select name="city" lay-verify="required">
                                <option value=""></option>
                                <option value="0">全部</option>
                                <option value="1">是</option>
                                <option value="2">否</option>
                            </select>
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">单据状态:</label>
                        <div class="layui-input-block" style="width: 150px;">
                            <select name="city" lay-verify="required">
                                <option value=""></option>
                                <option value="0">全部</option>
                                <option value="1">作废</option>
                                <option value="2">签收</option>
                                <option value="3">未签收</option>
                                <option value="4">正常</option>
                            </select>
                        </div>
                    </div>

                </div>

            </div>

            <!-- 操作按扭组 -->
            <div class="layui-form-item" style="padding-left: 11px;height: 30px;">
                <div class="layui-inline">
                    <button type="button" class="layui-btn layui-btn-small btnQuery" id="opUpdate">编辑</button>
                    <button type="button" class="layui-btn layui-btn-small btnOther" id="opDetail">详情</button>
                    <button type="button" class="layui-btn layui-btn-small btnOther" id="opCancel">取消</button>
                    <button type="button" class="layui-btn layui-btn-small btnOther" id="">作废</button>
                </div>
            </div>

            <!-- 数据表格 -->
            <table id="test" class="layui-table">
                <colgroup>
                    <col width="50">
                    <col width="60">
                    <col width="100">
                    <col width="87">
                    <col width="80">
                    <col width="80">
                    <col width="70">
                    <col width="100">
                    <col width="90">
                    <col width="90">
                    <col width="70">
                    <col>
                </colgroup>
                <thead>
                <tr>
                    <th><input type="checkbox" name="check" lay-skin="primary"></th>
                    <th>序号</th>
                    <th>工作单号</th>
                    <th>客户单号</th>
                    <th>产品</th>
                    <th>到达地编码</th>
                    <th>到达地</th>
                    <th>业务通知单号</th>
                    <th>取货人工号</th>
                    <th>取货人姓名</th>
                    <th>取货时间</th>
                    <th>寄件人</th>
                    <th>收件人</th>
                </tr>
                </thead>
                </tbody>
            </table>
    </div>
    </form>
</div>
</div>
<script type="text/javascript" src="../../custom/jquery.min.js"></script>
<script type="text/javascript" src="../../layer/layer.js"></script>
<script type="text/javascript" src="../../layui/layui.js"></script>
<script type="text/javascript">
	
	layui.use('table',function(){
	  		var table = layui.table;
	  	
	  	table.render({
	  		elem :'#test'
	  		,url : 'http://175.178.44.54:12307/accWorkorder'
				,parseData:function(res) {
					console.log(res.data.records)
					return {
						"code": res.status,
						"msg": res.msg,
						"count": res.data.total,
						"data": res.data.records
					}
				}
	  		,cols:[[
			{field: 'id',width:100, title:'序号'}
	  		,{field: 'businessnoticeno',width:250, title:'工作单号'}
	  		,{field: 'jobno',width:135, title:'工作编号'}
	  		,{field: 'jobtype',width:135, title:'工作类型'}
			,{field: 'pickupstatus',width:260, title:'取件状态'}
			,{field: 'pickuptime',width:260, title:'取件时间'}
			,{width:135, title:'操作'}
	  		]],
			response: {
				statusCode: 200 //成功的状态码，默认：0
			}
	  		,page : true
	  		,limit : 6,
			done:function (res, curr, count) {
				console.log('a')      
			}		
	  	}); 
	  	
		/* response: {
			statusCode: 200
		}, */
	});
	
	layui.use(['laypage', 'layer'], function(){
		  var laypage = layui.laypage
		  ,layer = layui.layer;
		  
	   //完整功能
	     laypage.render({
	       elem: 'ApartAge'
	       ,count: 6 //条数
		   ,limit:6//每页的数据量
	       ,layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip']
	       ,jump: function(obj){
	         console.log(obj)
	       }
	     });
		
		//调用分页
		  laypage.render({
		    count: data.length
		    ,jump: function(obj){
		      //模拟渲染
		      document.getElementById('biuuu_city_list').innerHTML = function(){
		        var arr = []
		        ,thisData = data.concat().splice(obj.curr*obj.limit - obj.limit, obj.limit);
		        layui.each(thisData, function(index, item){
		          arr.push('<li>'+ item +'</li>');
		        });
		        return arr.join('');
		      }();
		    }
		  });
	});
	
    //加载'form'模块，使checkbox、select、radio初始化
    layui.use('form', function(){

    });

    //加载'table'组件
    layui.use('table', function(){
        var table = layui.table;
    });

    //加载'laydate'时间组件
    layui.use('laydate', function(){
        var laydate = layui.laydate;
        //执行一个laydate实例
        laydate.render({
            elem: '#opTime' //指定元素
        });
    });

    $(function(){
        //显示、隐藏剩余的查询条件
        $('#btnMore').click(function(){
            $("#hQuery").toggle();
        });

        //新增
        $('#opAdd').click(function(){
            //页面层
            layer.open({
                title: ['新增', 'color:#fff;background:#1da02b;'],
                type: 2,
                //skin: 'layui-layer-rim', //加上边框
                area: ['930px', '450px'], //宽高
                content: 'businessAcceptance_add.html'
            });
        });

        //编辑
        $('#opUpdate').click(function(){
            //页面层
            layer.open({
                title: ['编辑', 'color:#fff;background:#1da02b;'],
                type: 2,
                //skin: 'layui-layer-rim', //加上边框
                area: ['900px', '340px'], //宽高
                content: 'dispatchingPersonnelSet_add.html'
            });
        });

        //删除
        $('#opDelete').click(function(){
            //询问框
            layer.confirm('确定是否删除？', {
                btn: ['是','否'] //按钮
            }, function(){
                layer.msg('删除成功', {icon: 1});
            }, function(){

            });
        });

    });

</script>

</body>
</html>
